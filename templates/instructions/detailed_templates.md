# Queen指示テンプレート集

## 📋 概要

Hiveマルチエージェントシステムにおいて、ユーザーがQueenに対して効果的な指示を行うためのテンプレート集です。各開発シナリオに応じて適切なテンプレートを選択し、コピー&ペーストして使用してください。

---

## 🐛 1. バグ修正テンプレート

### 基本テンプレート
```
TASK:BUG_FIX_[連番]:以下のバグを修正してください。

**バグの概要:**
[バグの概要を簡潔に記述]

**発生条件:**
- 環境: [OS/ブラウザ/バージョン等]
- 手順: [再現手順を詳細に記述]
- 頻度: [常時/間欠的/特定条件下]

**期待動作:**
[正常時にどう動作すべきか]

**実際の動作:**
[現在どう動作しているか]

**エラーメッセージ/ログ:**
```
[エラーメッセージやスタックトレースを貼り付け]
```

**影響範囲:**
[このバグが影響する機能やユーザー]

**緊急度:**
[ ] Critical - システム停止/データ損失
[ ] High - 主要機能に支障
[ ] Medium - 一部機能に問題
[ ] Low - 軽微な問題

**担当Worker指定:**
- 主担当: [developer/analyzer/tester]
- 協力: [必要に応じて他Worker]
```

### 具体例
```
TASK:BUG_FIX_001:ユーザー登録時のメール送信エラーを修正してください。

**バグの概要:**
新規ユーザー登録時に確認メールが送信されない

**発生条件:**
- 環境: 本番環境 (Python 3.12, Flask 2.3)
- 手順: 1) 新規登録フォーム入力 2) 送信ボタンクリック 3) メール未着
- 頻度: 常時発生

**期待動作:**
登録完了後、30秒以内に確認メールが送信される

**実際の動作:**
登録は完了するがメールが送信されない

**エラーメッセージ/ログ:**
```
2024-01-15 10:30:25 ERROR: SMTP connection timeout
ConnectionError: [Errno 110] Connection timed out
```

**影響範囲:**
新規ユーザーの登録プロセス、ユーザー体験に重大な影響

**緊急度:**
[x] High - 主要機能に支障

**担当Worker指定:**
- 主担当: developer
- 協力: analyzer (ログ分析)
```

---

## ✨ 2. 新機能実装テンプレート

### 基本テンプレート
```
TASK:FEATURE_[連番]:以下の新機能を実装してください。

**機能名:**
[機能の名称]

**目的・背景:**
[なぜこの機能が必要か、解決したい課題]

**機能概要:**
[機能の全体像を簡潔に説明]

**詳細仕様:**
### ユーザーインターフェース
- [UI/UXの要件]
- [画面遷移や操作フロー]

### 機能要件
- [具体的な機能要件をリスト形式で]
- [入力/出力の仕様]
- [パフォーマンス要件]

### 技術要件
- [使用技術スタック]
- [データベース設計]
- [API設計]

**制約・前提条件:**
- [技術的制約]
- [既存システムとの互換性]
- [スケジュール制約]

**成功基準:**
- [機能完成の判定基準]
- [テスト基準]
- [パフォーマンス基準]

**優先度:**
[ ] Critical - 最優先で実装
[ ] High - 重要度高
[ ] Medium - 通常の優先度
[ ] Low - 後回し可

**担当Worker指定:**
- 設計: [analyzer/documenter]
- 実装: [developer]
- テスト: [tester]
- レビュー: [reviewer]
```

### 具体例
```
TASK:FEATURE_001:ダッシュボードでのリアルタイム通知機能を実装してください。

**機能名:**
リアルタイム通知システム

**目的・背景:**
ユーザーが重要な更新やアラートを即座に受け取れるようにし、システムの応答性を向上させる

**機能概要:**
WebSocketを使用してブラウザにリアルタイムで通知を表示する機能

**詳細仕様:**
### ユーザーインターフェース
- 画面右上に通知ベルアイコンを表示
- 新着通知は数字バッジで表示
- 通知一覧は点検で表示（最新10件）
- 各通知は既読/未読の状態管理

### 機能要件
- WebSocketによるリアルタイム通信
- 通知の種類別アイコン・色分け
- 通知履歴の保存（30日間）
- ブラウザ通知API連携（オプション）

### 技術要件
- WebSocket (Socket.IO)
- Redis (通知キューイング)
- PostgreSQL (通知履歴保存)

**制約・前提条件:**
- 既存のFlaskアプリケーションに統合
- 現在のユーザー認証システムを使用
- 実装期間: 2週間以内

**成功基準:**
- 通知の配信遅延が1秒以内
- 同時接続ユーザー1000人まで対応
- 単体・結合テストのカバレッジ90%以上

**優先度:**
[x] High - 重要度高

**担当Worker指定:**
- 設計: analyzer
- 実装: developer
- テスト: tester
- レビュー: reviewer
```

---

## 👀 3. コードレビューテンプレート

### 基本テンプレート
```
TASK:REVIEW_[連番]:以下のコードレビューを実施してください。

**レビュー対象:**
- ブランチ: [ブランチ名]
- PR番号: [該当する場合]
- ファイル範囲: [specific files or "全体"]

**レビューの焦点:**
[ ] コード品質 (可読性、保守性)
[ ] セキュリティ脆弱性
[ ] パフォーマンス
[ ] 設計パターン・アーキテクチャ
[ ] テストカバレッジ
[ ] ドキュメント
[ ] その他: [具体的な観点]

**特に確認したい点:**
[レビューで特に注意してほしい項目や懸念点]

**背景情報:**
[コードの変更背景や関連するIssue情報]

**レビュー基準:**
- コーディング規約: [準拠すべき規約]
- セキュリティ基準: [適用すべきセキュリティ要件]
- パフォーマンス基準: [期待する性能レベル]

**期待アウトプット:**
- [ ] 問題点の指摘と改善案
- [ ] 良い実装の評価
- [ ] 推奨するリファクタリング
- [ ] セキュリティリスクの評価
- [ ] 承認可否の判定

**担当Worker指定:**
- 主担当: reviewer
- 協力: [developer/analyzer/tester]
```

### 具体例
```
TASK:REVIEW_001:ユーザー認証モジュールのセキュリティレビューを実施してください。

**レビュー対象:**
- ブランチ: feat/user-auth-enhancement
- PR番号: #45
- ファイル範囲: src/auth/, tests/auth/

**レビューの焦点:**
[x] セキュリティ脆弱性
[x] コード品質 (可読性、保守性)
[ ] パフォーマンス
[x] テストカバレッジ

**特に確認したい点:**
- パスワードハッシュ化の実装
- SQLインジェクション対策
- セッション管理の安全性
- 入力値検証の妥当性

**背景情報:**
Issue #32「認証機能の脆弱性対応」の実装コード
前回のペネトレーションテストで指摘された項目の修正

**レビュー基準:**
- セキュリティ基準: OWASP Top 10対応
- コーディング規約: PEP 8準拠
- テストカバレッジ: 95%以上

**期待アウトプット:**
[x] セキュリティリスクの評価
[x] 問題点の指摘と改善案
[x] 承認可否の判定

**担当Worker指定:**
- 主担当: reviewer
- 協力: analyzer (脆弱性分析)
```

---

## 🔍 4. 調査・分析テンプレート

### 基本テンプレート
```
TASK:ANALYSIS_[連番]:以下の調査・分析を実施してください。

**調査目的:**
[何のために調査するのか、解決したい課題]

**調査対象:**
[調査対象のシステム、コード、データ等]

**調査範囲:**
- 期間: [調査対象期間]
- 対象ファイル/モジュール: [具体的な範囲]
- データ範囲: [分析するデータの範囲]

**調査・分析項目:**
[ ] パフォーマンス分析
[ ] エラー・例外分析
[ ] 使用状況分析
[ ] セキュリティ分析
[ ] コード品質分析
[ ] 依存関係分析
[ ] その他: [具体的な分析項目]

**調査方法:**
[使用する分析手法やツール]

**期待アウトプット:**
- [ ] 分析レポート
- [ ] 問題点の特定
- [ ] 改善提案
- [ ] 数値データ・グラフ
- [ ] 根本原因の特定
- [ ] 次のアクション項目

**緊急度:**
[ ] 緊急 - 即座に対応が必要
[ ] 高 - 1週間以内に結果が必要
[ ] 中 - 2週間以内
[ ] 低 - 時間をかけて詳細分析

**担当Worker指定:**
- 主担当: analyzer
- 協力: [developer/tester/documenter]
```

### 具体例
```
TASK:ANALYSIS_001:API応答速度の劣化原因を調査・分析してください。

**調査目的:**
過去1ヶ月でAPI応答時間が2倍に劣化した原因を特定し、改善策を提案する

**調査対象:**
- REST API エンドポイント全体
- データベースクエリパフォーマンス
- サーバーリソース使用状況

**調査範囲:**
- 期間: 2024年1月1日〜1月31日
- 対象ファイル/モジュール: src/api/, src/models/, config/
- データ範囲: アクセスログ、APMデータ、DBスローログ

**調査・分析項目:**
[x] パフォーマンス分析
[ ] エラー・例外分析
[x] 使用状況分析
[ ] セキュリティ分析

**調査方法:**
- APMツール (New Relic) でのパフォーマンス分析
- PostgreSQLスローログ解析
- アクセスログの統計分析
- コードプロファイリング

**期待アウトプット:**
[x] 分析レポート
[x] 問題点の特定
[x] 改善提案
[x] 数値データ・グラフ
[x] 根本原因の特定

**緊急度:**
[x] 高 - 1週間以内に結果が必要

**担当Worker指定:**
- 主担当: analyzer
- 協力: developer (コード分析)
```

---

## 📚 5. 文書化テンプレート

### 基本テンプレート
```
TASK:DOCUMENTATION_[連番]:以下の文書化作業を実施してください。

**文書化対象:**
[文書化する機能、システム、プロセス等]

**文書の種類:**
[ ] API仕様書
[ ] ユーザーガイド
[ ] 技術仕様書
[ ] 設計書
[ ] 運用マニュアル
[ ] トラブルシューティングガイド
[ ] README
[ ] その他: [具体的な文書種類]

**対象読者:**
[ ] エンドユーザー
[ ] 開発者
[ ] システム管理者
[ ] ステークホルダー
[ ] その他: [具体的な読者層]

**文書化範囲:**
[文書化する機能や内容の範囲を具体的に]

**必要な情報:**
- 背景・目的
- 概要説明
- 詳細仕様
- 使用例・サンプル
- 設定方法
- トラブルシューティング
- FAQ

**文書構成要件:**
- [ ] 図表・スクリーンショット含む
- [ ] コードサンプル含む
- [ ] ステップバイステップガイド
- [ ] 検索しやすい構成
- [ ] バージョン管理情報

**参考資料:**
[既存文書、仕様書、関連資料等]

**期限:**
[文書化完了の期限]

**担当Worker指定:**
- 主担当: documenter
- 協力: [developer/analyzer/tester]
```

### 具体例
```
TASK:DOCUMENTATION_001:新しいAPI認証システムのドキュメントを作成してください。

**文書化対象:**
OAuth 2.0ベースの新API認証システム

**文書の種類:**
[x] API仕様書
[x] ユーザーガイド
[ ] 技術仕様書
[ ] 設計書

**対象読者:**
[x] 開発者 (API利用者)
[ ] エンドユーザー
[x] システム管理者

**文書化範囲:**
- 認証フローの全体像
- エンドポイント仕様
- 認証トークンの取得・使用方法
- エラーレスポンス
- セキュリティ考慮事項

**必要な情報:**
- OAuth 2.0フローの説明
- クライアント登録手順
- APIキー・シークレットの管理
- トークンのリフレッシュ方法
- レート制限
- よくあるエラーとその対処法

**文書構成要件:**
[x] 図表・スクリーンショット含む
[x] コードサンプル含む
[x] ステップバイステップガイド
[x] 検索しやすい構成

**参考資料:**
- OAuth 2.0 RFC 6749
- 既存のAPI仕様書 (docs/api_v1.md)
- 実装コード (src/auth/)

**期限:**
2024年2月15日

**担当Worker指定:**
- 主担当: documenter
- 協力: developer (実装詳細), analyzer (セキュリティ面)
```

---

## 📝 6. 使用上の注意

### テンプレート選択の指針
1. **バグ修正**: 問題が発生している場合
2. **新機能実装**: 新しい機能を追加する場合
3. **コードレビュー**: コードの品質確認が必要な場合
4. **調査・分析**: 問題の原因究明や現状把握が必要な場合
5. **文書化**: ドキュメント作成・更新が必要な場合

### カスタマイズのコツ
- 不要な項目は削除してOK
- プロジェクト固有の項目は追加
- チェックボックスは適切に選択
- 具体的な情報ほど効果的

### Worker指定の考え方
- **複雑なタスク**: 複数Workerの協力を指定
- **専門性の高いタスク**: 専門Workerを主担当に
- **緊急タスク**: 必要最小限のWorkerで迅速対応

---

*このテンプレート集は継続的に更新・改善されます。新しいシナリオや改善提案があれば随時追加してください。*